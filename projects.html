<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheFirstIstari | Project Details</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 2rem;
        }
        .container { max-width: 800px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 2rem; }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        h2 { font-size: 1.25rem; margin-top: 1.5rem; color: #4a9eff; }
        .back { margin-bottom: 1rem; display: inline-block; color: #4a9eff; text-decoration: none; border: 1px solid #4a9eff; padding: 0.4rem 0.8rem; border-radius: 14px; }
        .card { background: rgba(255,255,255,0.04); padding: 1rem; border-radius: 10px; margin-top: 1rem; }
        .card p { color: #ddd; }
        .links { margin-top: 0.75rem; }
        .links a { color: #4a9eff; text-decoration: none; margin-right: 0.75rem; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back">‚Üê Back</a>
            <h1>Project Details</h1>
            <p class="bio">Curated projects, demos and experiments.</p>
        </header>

        @media (prefers-reduced-motion: reduce){ *{ transition:none!important; } }
        /* Light-mode override when user forces theme */
        :root[data-theme='light']{
            --bg-1: #f7f9fc; --bg-2:#eef2f7; --card: rgba(10,10,10,0.03); --muted:#334155; --accent:#2563eb; color-scheme: light;
        }
        /* small humorous note shown in light mode */
        .light-note{ display:none; margin:0.5rem auto 0; max-width:1100px; background:rgba(255,255,255,0.05); border-radius:10px; padding:0.6rem 0.9rem; color:var(--muted); text-align:center; font-size:0.95rem; }
        :root[data-theme='light'] ~ body .light-note, :root[data-theme='light'] .light-note{ display:block; }
            <input class="search" id="search" placeholder="Search projects or technologies..." aria-label="Search projects" />
            <div class="tags" id="tagList" aria-hidden="false">
                <button class="tag" data-tag="all">All</button>
                <button class="tag" data-tag="python">Python</button>
                <button class="tag" data-tag="csharp">C#</button>
                <button class="tag" data-tag="ai">AI</button>
                <button class="tag" data-tag="gpu">GPU</button>
            </div>
            <button class="theme-toggle" id="themeToggle" aria-pressed="false">Theme</button>
            </div>

            <div class="light-note" id="lightNote" role="status">
                Light mode enabled ‚Äî sunglasses recommended. üòé<button id="dismissLightNote" style="margin-left:0.6rem;background:transparent;border:none;cursor:pointer;color:var(--muted)">Dismiss</button>
            </div>
        </div>

        <main class="grid" id="projectsGrid">
            <!-- Coursework -->
            <article class="card" data-tags="csharp,algorithms" tabindex="0">
                <div class="thumb" aria-hidden="true">
                    <img loading="lazy" alt="Coursework thumbnail" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'><rect width='100%' height='100%' fill='%231b2430'/><text x='50%' y='50%' fill='%234a9eff' font-size='42' font-family='Arial' dominant-baseline='middle' text-anchor='middle'>Coursework</text></svg>" />
                </div>
                <div>
                    <div class="meta">
                        <div>
                            <div class="title">Coursework Repo</div>
                            <div class="desc">C# algorithms, data structures and practice exercises.</div>
                        </div>
                        <div class="badges">
                            <a class="badge" href="https://github.com/TheFirstIstari/CourseWorkRepo" target="_blank" rel="noopener">GitHub</a>
                            <button class="more" data-project='{"title":"Coursework","desc":"A curated collection of C# coursework covering trees, graphs, algorithms and coding challenge solutions.","links":[{"label":"Repository","url":"https://github.com/TheFirstIstari/CourseWorkRepo"}],"tags":["C#","algorithms"]}'>More</button>
                        </div>
                    </div>
                </div>
            </article>

            <!-- SteinLine -->
            <article class="card" data-tags="python,ai,gpu" tabindex="0">
                <div class="thumb" aria-hidden="true">
                    <img loading="lazy" alt="SteinLine thumbnail" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'><rect width='100%' height='100%' fill='%230e1624'/><text x='50%' y='50%' fill='%233b82f6' font-size='36' font-family='Arial' dominant-baseline='middle' text-anchor='middle'>Project SteinLine</text></svg>" />
                </div>
                <div>
                    <div class="meta">
                        <div>
                            <div class="title">Project SteinLine</div>
                            <div class="desc">Distributed forensic pipeline ‚Äî multimodal AI, edge storage and Qt visualization.</div>
                        </div>
                        <div class="badges">
                            <a class="badge" href="https://github.com/TheFirstIstari/Project-SteinLine" target="_blank" rel="noopener">GitHub</a>
                            <button class="more" data-project='{"title":"Project SteinLine","desc":"Asymmetrical distributed forensic platform for documents, images and video with GPU inference and a PySide6 visualization front-end.","links":[{"label":"Repository","url":"https://github.com/TheFirstIstari/Project-SteinLine"}],"tags":["Python","AI","GPU"]}'>More</button>
                        </div>
                    </div>
                </div>
            </article>

            <!-- BadAppleStein -->
            <article class="card" data-tags="python,c" tabindex="0">
                <div class="thumb" aria-hidden="true">
                    <img loading="lazy" alt="BadAppleStein thumbnail" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='800'><rect width='100%' height='100%' fill='%230f1724'/><text x='50%' y='50%' fill='%23ffb347' font-size='36' font-family='Arial' dominant-baseline='middle' text-anchor='middle'>BadAppleStein</text></svg>" />
                </div>
                <div>
                    <div class="meta">
                        <div>
                            <div class="title">BadAppleStein</div>
                            <div class="desc">Frame-to-PDF matching pipeline using Python and C for fast matching.</div>
                        </div>
                        <div class="badges">
                            <a class="badge" href="https://github.com/TheFirstIstari/BadAppleStein" target="_blank" rel="noopener">GitHub</a>
                            <a class="badge" href="https://www.youtube.com/watch?v=Ia1wR8HScm0" target="_blank" rel="noopener">Demo</a>
                            <button class="more" data-project='{"title":"BadAppleStein","desc":"Reconstructs high-contrast video animations by matching frames to a library of PDF pages. Fast C components and multiple rendering pipelines.","links":[{"label":"Repository","url":"https://github.com/TheFirstIstari/BadAppleStein"},{"label":"Demo","url":"https://www.youtube.com/watch?v=Ia1wR8HScm0"}],"tags":["Python","C"]}'>More</button>
                        </div>
                    </div>
                </div>
            </article>

        </main>

        <!-- Modal -->
        <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
            <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
                <div style="display:flex;gap:0.5rem;align-items:center;">
                    <h3 id="modalTitle">Title</h3>
                    <button class="close" id="modalClose" aria-label="Close dialog">‚úï</button>
                </div>
                <p id="modalDesc" style="color:var(--muted);"></p>
                <div id="modalLinks" style="margin-top:0.75rem;display:flex;gap:0.5rem;flex-wrap:wrap"></div>
            </div>
        </div>

    </div>

    <script>
        // Simple filtering and modal logic
        const search = document.getElementById('search');
        const tagList = document.getElementById('tagList');
        const grid = document.getElementById('projectsGrid');
        const tags = Array.from(document.querySelectorAll('.tag'));
        const cards = Array.from(document.querySelectorAll('.card'));

        function applyFilter(){
            const q = search.value.trim().toLowerCase();
            const activeTag = tags.find(t=>t.classList.contains('active'))?.dataset.tag || 'all';
            cards.forEach(card=>{
                const title = card.querySelector('.title').textContent.toLowerCase();
                const desc = card.querySelector('.desc').textContent.toLowerCase();
                const cardTags = card.dataset.tags.split(',').map(s=>s.trim().toLowerCase());
                const tagMatch = (activeTag==='all') || cardTags.includes(activeTag);
                const textMatch = q === '' || title.includes(q) || desc.includes(q) || cardTags.some(t=>t.includes(q));
                card.style.display = (tagMatch && textMatch) ? '' : 'none';
            });
        }

        search.addEventListener('input', applyFilter);
        tags.forEach(t=> t.addEventListener('click', ()=>{ tags.forEach(x=>x.classList.remove('active')); t.classList.add('active'); applyFilter(); }));
        // default select 'All'
        tags[0].classList.add('active');

        // Modal
        const modalBackdrop = document.getElementById('modalBackdrop');
        const modalTitle = document.getElementById('modalTitle');
        const modalDesc = document.getElementById('modalDesc');
        const modalLinks = document.getElementById('modalLinks');
        const modalClose = document.getElementById('modalClose');

        function openModal(data){
            modalTitle.textContent = data.title;
            modalDesc.textContent = data.desc;
            modalLinks.innerHTML = '';
            (data.links||[]).forEach(l=>{
                const a = document.createElement('a');
                a.className = 'badge';
                a.href = l.url; a.target = '_blank'; a.rel='noopener';
                a.textContent = l.label;
                modalLinks.appendChild(a);
            });
            modalBackdrop.style.display = 'flex';
            modalBackdrop.setAttribute('aria-hidden','false');
            modalClose.focus();
        }

        function closeModal(){
            modalBackdrop.style.display = 'none';
            modalBackdrop.setAttribute('aria-hidden','true');
        }

        document.querySelectorAll('.more').forEach(btn=> btn.addEventListener('click', (e)=>{
            const data = JSON.parse(btn.dataset.project);
            openModal(data);
        }));
        modalClose.addEventListener('click', closeModal);
        modalBackdrop.addEventListener('click', (e)=>{ if(e.target===modalBackdrop) closeModal(); });
        document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeModal(); });

        // Theme handling: persist choice, respect system preference, show light-mode note
        const themeToggle = document.getElementById('themeToggle');
        const lightNote = document.getElementById('lightNote');
        const dismissLightNote = document.getElementById('dismissLightNote');

        function applyTheme(theme){
            if(theme === 'light'){
                document.documentElement.setAttribute('data-theme','light');
                themeToggle.setAttribute('aria-pressed','true');
                // show light note unless dismissed
                if(!localStorage.getItem('light_note_dismissed')) lightNote.style.display = 'block';
            } else if(theme === 'dark'){
                document.documentElement.removeAttribute('data-theme');
                themeToggle.setAttribute('aria-pressed','false');
                lightNote.style.display = 'none';
            }
            localStorage.setItem('theme', theme);
        }

        // initialize theme from localStorage or system
        (function(){
            const stored = localStorage.getItem('theme');
            if(stored) applyTheme(stored);
            else{
                const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
                applyTheme(prefersLight ? 'light' : 'dark');
            }
        })();

        themeToggle.addEventListener('click', ()=>{
            const now = document.documentElement.getAttribute('data-theme') === 'light' ? 'light' : 'dark';
            applyTheme(now === 'light' ? 'dark' : 'light');
        });

        dismissLightNote.addEventListener('click', ()=>{ localStorage.setItem('light_note_dismissed','1'); lightNote.style.display='none'; });

        // keyboard: enter opens card's more
        cards.forEach(card=>{
            card.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ const btn = card.querySelector('.more'); btn && btn.click(); } });
        });
    </script>
    
</body>
</html>
