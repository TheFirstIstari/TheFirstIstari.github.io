<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheFirstIstari | Project Details</title>
    <style>
        /* CSS variables and theming */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root{
            /* Coolors palette */
            --color-1: #b6465f;
            --color-2: #028090;
            --color-3: #020202;
            --color-4: #890620;
            --color-ghost: #fbfbff;

            /* Default (dark) tokens */
            --bg-1: var(--color-3);
            --bg-2: #071014;
            --card: rgba(255,255,255,0.04);
            --muted: rgba(251,251,255,0.8);
            --accent: var(--color-2);
            --accent-2: var(--color-1);
            --glass: rgba(255,255,255,0.03);
            --radius: 12px;
            --text: var(--color-ghost);
            --modal-bg-dark: rgba(6,8,12,0.96);
            --modal-bg-light: rgba(255,255,255,0.98);
        }

        /* Respect system preference for initial load */
        @media (prefers-color-scheme: light){
            :root{
                --bg-1: #eaf6f6;
                --bg-2: #fbfdff;
                --text: var(--color-3);
                --accent: var(--color-2);
                --muted: #456990;
                --card: rgba(255,255,255,0.95);
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            background: linear-gradient(135deg,var(--bg-1) 0%, var(--bg-2) 100%);
            color: var(--text);
            min-height: 100vh;
            padding: 2rem;
        }

        .container { max-width: 1100px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 1.25rem; }
        h1 { font-size: 1.9rem; margin-bottom: 0.25rem; color:var(--text); }
        .back{ color:var(--accent); text-decoration:none; font-weight:600; }
        p.bio{ color: var(--muted); margin-top: 0.25rem; }

        .controls{ display:flex; gap:0.5rem; justify-content:center; align-items:center; flex-wrap:wrap; margin:1rem 0; }
        .search{ background:var(--card); border:1px solid rgba(255,255,255,0.04); padding:0.5rem 0.75rem; border-radius:999px; color:var(--muted); min-width:200px; }
        .search:focus-visible{ outline:3px solid color-mix(in srgb, var(--accent) 40%, transparent); outline-offset:3px; }
        .tags{ display:flex; gap:0.5rem; flex-wrap:wrap; }
        .tag{ background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted); padding:0.35rem 0.6rem; border-radius:999px; cursor:pointer; }
        .tag.active{ background:var(--accent); color:white; border-color:var(--accent); }
        .tag:focus-visible{ outline:3px solid color-mix(in srgb, var(--accent) 45%, transparent); outline-offset:3px; }
        .theme-toggle{ margin-left:0.5rem; padding:0.4rem 0.6rem; background:var(--glass); border-radius:10px; cursor:pointer; border:1px solid rgba(255,255,255,0.04); color:var(--muted); }
        .theme-toggle:focus-visible{ box-shadow:0 0 0 4px color-mix(in srgb, var(--accent) 18%, black); }

        .grid{ display:grid; grid-template-columns: repeat(auto-fill,minmax(280px,1fr)); gap:1rem; margin-top:1rem; }
        .card{ background:var(--card); padding:0.75rem; border-radius:var(--radius); overflow:hidden; display:flex; flex-direction:column; gap:0.5rem; transition:transform 180ms ease, box-shadow 180ms ease; }
        .card:focus-within, .card:hover{ transform:translateY(-6px); box-shadow: 0 8px 24px rgba(2,6,23,0.6); }
        .thumb{ width:100%; height:220px; border-radius:8px; overflow:hidden; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(0,0,0,0.08)); display:block; }
        .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
        .meta{ display:flex; justify-content:space-between; align-items:center; gap:0.5rem; }
        .title{ font-weight:600; color:var(--accent); }
        .desc{ color:var(--muted); font-size:0.95rem; }
        .badges{ display:flex; gap:0.4rem; align-items:center; }
        .badge{ background:transparent; border:1px solid rgba(255,255,255,0.06); padding:0.25rem 0.45rem; border-radius:8px; color:var(--muted); font-size:0.85rem; text-decoration:none; }
        .badge:focus-visible{ outline:3px solid color-mix(in srgb, var(--accent) 40%, transparent); outline-offset:3px; }
        .more{ margin-left:auto; background:var(--accent); color:white; border:none; padding:0.4rem 0.6rem; border-radius:8px; cursor:pointer; }
        .more:focus-visible{ box-shadow:0 0 0 4px color-mix(in srgb, var(--accent) 18%, black); }

        /* Modal */
        .modal-backdrop{ position:fixed; inset:0; display:none; background:rgba(2,6,23,0.55); align-items:center; justify-content:center; z-index:9999; backdrop-filter: blur(6px) saturate(1.05); }
        .modal{ background:var(--modal-bg-dark); color:inherit; width:min(900px,95%); max-width:900px; border-radius:12px; padding:1rem 1.25rem; max-height:80vh; overflow:auto; box-shadow: 0 20px 60px rgba(2,6,23,0.75); border:1px solid rgba(255,255,255,0.04); isolation:isolate; }
        .modal h3{ margin:0; color:var(--accent); font-size:1.25rem; }
        .modal p{ color:var(--muted); font-size:1rem; line-height:1.4; margin-top:0.5rem; }
        .modal .close{ margin-left:auto; background:transparent; border:none; color:var(--muted); cursor:pointer; font-size:1.1rem; }

        @media (prefers-reduced-motion: reduce){ *{ transition:none!important; } }

        /* Light / Dark explicit overrides when user sets site theme */
        :root[data-theme='light']{
            --bg-1: #eaf6f6;
            --bg-2: #fbfdff;
            --card: rgba(255,255,255,0.95);
            --muted: #456990;
            --accent: var(--color-2);
            --accent-2: var(--color-1);
            --text: var(--color-3);
            --modal-bg-dark: rgba(255,255,255,0.98);
        }
        :root[data-theme='dark']{
            --bg-1: var(--color-3);
            --bg-2: #071014;
            --card: rgba(255,255,255,0.04);
            --muted: rgba(251,251,255,0.8);
            --accent: var(--color-2);
            --accent-2: var(--color-1);
            --text: var(--color-ghost);
            --modal-bg-dark: rgba(6,8,12,0.96);
        }

        /* Auto: use dark card tokens so cards match dark mode even when 'auto' is selected */
        :root[data-theme='auto']{
            --card: rgba(255,255,255,0.04);
            --muted: rgba(251,251,255,0.8);
            --accent: var(--color-2);
            --text: var(--color-ghost);
        }

        /* small humorous note shown in light mode */
        .light-note{ display:none; margin:0.5rem auto 0; max-width:1100px; background:rgba(255,255,255,0.05); border-radius:10px; padding:0.6rem 0.9rem; color:var(--muted); text-align:center; font-size:0.95rem; }
        :root[data-theme='light'] ~ body .light-note, :root[data-theme='light'] .light-note{ display:block; }

        /* Theme footer (fixed) */
        .site-theme-footer{ position:fixed; right:12px; bottom:12px; background:rgba(0,0,0,0.28); color:var(--text); border-radius:12px; padding:0.45rem; backdrop-filter: blur(6px); z-index:999; }
        .site-theme-footer button{ background:transparent; border:1px solid rgba(255,255,255,0.06); color:inherit; padding:0.35rem 0.5rem; margin:0 0.15rem; border-radius:8px; cursor:pointer; }
        .site-theme-footer button.active{ border-color:var(--accent); background:color-mix(in srgb, var(--accent) 12%, transparent); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back">← Back</a>
            <h1>Project Details</h1>
            <p class="bio">Curated projects, demos and experiments.</p>
        </header>

        <div class="controls" role="region" aria-label="Project controls">
            <input class="search" id="search" placeholder="Search projects or technologies..." aria-label="Search projects" />
            <div class="tags" id="tagList" aria-hidden="false">
                <button class="tag" data-tag="all">All</button>
                <button class="tag" data-tag="python">Python</button>
                <button class="tag" data-tag="csharp">C#</button>
                <button class="tag" data-tag="ai">AI</button>
                <button class="tag" data-tag="gpu">GPU</button>
            </div>
            <button class="theme-toggle" id="themeToggle" aria-pressed="false">Theme</button>
        </div>

        <div class="light-note" id="lightNote" role="status">
            Light mode enabled — how dare<button id="dismissLightNote" style="margin-left:0.6rem;background:transparent;border:none;cursor:pointer;color:var(--muted)">Dismiss</button>
        </div>

        <main class="grid" id="projectsGrid">
            <!-- Coursework -->
            <article class="card" data-tags="csharp,algorithms" tabindex="0">
                <div class="thumb" aria-hidden="true">
                    <img loading="lazy" alt="Coursework thumbnail" src="assets/images/coursework.svg" />
                </div>
                <div>
                    <div class="meta">
                        <div>
                            <div class="title">Coursework Repo</div>
                            <div class="desc">C# algorithms, data structures and practice exercises.</div>
                        </div>
                        <div class="badges">
                            <a class="badge" href="https://github.com/TheFirstIstari/CourseWorkRepo" target="_blank" rel="noopener">GitHub</a>
                            <button class="more" data-project='{"title":"Coursework","desc":"A curated collection of C# coursework covering trees, graphs, algorithms and coding challenge solutions.","links":[{"label":"Repository","url":"https://github.com/TheFirstIstari/CourseWorkRepo"}],"tags":["C#","algorithms"]}'>More</button>
                        </div>
                    </div>
                </div>
            </article>

            <!-- SteinLine -->
            <article class="card" data-tags="python,ai,gpu" tabindex="0">
                <div class="thumb" aria-hidden="true">
                    <img loading="lazy" alt="SteinLine thumbnail" src="assets/images/steinline.svg" />
                </div>
                <div>
                    <div class="meta">
                        <div>
                            <div class="title">Project SteinLine</div>
                            <div class="desc">Distributed forensic pipeline — multimodal AI, edge storage and Qt visualization.</div>
                        </div>
                        <div class="badges">
                            <a class="badge" href="https://github.com/TheFirstIstari/Project-SteinLine" target="_blank" rel="noopener">GitHub</a>
                            <button class="more" data-project='{"title":"Project SteinLine","desc":"Asymmetrical distributed forensic platform for documents, images and video with GPU inference and a PySide6 visualization front-end.","links":[{"label":"Repository","url":"https://github.com/TheFirstIstari/Project-SteinLine"}],"tags":["Python","AI","GPU"]}'>More</button>
                        </div>
                    </div>
                </div>
            </article>

            <!-- BadAppleStein -->
            <article class="card" data-tags="python,c" tabindex="0">
                <div class="thumb" aria-hidden="true">
                    <img loading="lazy" alt="BadAppleStein thumbnail" src="assets/images/badapplestein.svg" />
                </div>
                <div>
                    <div class="meta">
                        <div>
                            <div class="title">BadAppleStein</div>
                            <div class="desc">Frame-to-PDF matching pipeline using Python and C for fast matching.</div>
                        </div>
                        <div class="badges">
                            <a class="badge" href="https://github.com/TheFirstIstari/BadAppleStein" target="_blank" rel="noopener">GitHub</a>
                            <a class="badge" href="https://www.youtube.com/watch?v=Ia1wR8HScm0" target="_blank" rel="noopener">Demo</a>
                            <button class="more" data-project='{"title":"BadAppleStein","desc":"Reconstructs high-contrast video animations by matching frames to a library of PDF pages. Fast C components and multiple rendering pipelines.","links":[{"label":"Repository","url":"https://github.com/TheFirstIstari/BadAppleStein"},{"label":"Demo","url":"https://www.youtube.com/watch?v=Ia1wR8HScm0"}],"tags":["Python","C"]}'>More</button>
                        </div>
                    </div>
                </div>
            </article>

        </main>

        <!-- Modal -->
        <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
            <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
                <div style="display:flex;gap:0.5rem;align-items:center;">
                    <h3 id="modalTitle">Title</h3>
                    <button class="close" id="modalClose" aria-label="Close dialog">✕</button>
                </div>
                <p id="modalDesc" style="color:var(--muted);"></p>
                <div id="modalLinks" style="margin-top:0.75rem;display:flex;gap:0.5rem;flex-wrap:wrap"></div>
            </div>
        </div>

    </div>
    <footer class="site-theme-footer" aria-label="Theme selector">
        <div style="display:flex;align-items:center;gap:0.25rem;">
            <button data-theme="light" class="theme-btn" aria-pressed="false">Light</button>
            <button data-theme="dark" class="theme-btn" aria-pressed="false">Dark</button>
            <button data-theme="auto" class="theme-btn" aria-pressed="false">Auto</button>
        </div>
    </footer>

    <script>
        // Simple filtering and modal logic
        const search = document.getElementById('search');
        const tagList = document.getElementById('tagList');
        const grid = document.getElementById('projectsGrid');
        const tags = Array.from(document.querySelectorAll('.tag'));
        const cards = Array.from(document.querySelectorAll('.card'));

        function applyFilter(){
            const q = search.value.trim().toLowerCase();
            const activeTag = tags.find(t=>t.classList.contains('active'))?.dataset.tag || 'all';
            cards.forEach(card=>{
                const title = card.querySelector('.title').textContent.toLowerCase();
                const desc = card.querySelector('.desc').textContent.toLowerCase();
                const cardTags = card.dataset.tags.split(',').map(s=>s.trim().toLowerCase());
                const tagMatch = (activeTag==='all') || cardTags.includes(activeTag);
                const textMatch = q === '' || title.includes(q) || desc.includes(q) || cardTags.some(t=>t.includes(q));
                card.style.display = (tagMatch && textMatch) ? '' : 'none';
            });
        }

        search.addEventListener('input', applyFilter);
        // make tags behave like toggleable buttons with ARIA pressed state
        tags.forEach(t=>{
            t.setAttribute('role','button');
            t.setAttribute('aria-pressed', 'false');
            t.addEventListener('click', ()=>{ 
                tags.forEach(x=>{ x.classList.remove('active'); x.setAttribute('aria-pressed','false'); });
                t.classList.add('active');
                t.setAttribute('aria-pressed','true');
                applyFilter(); 
            });
        });
        // default select 'All'
        tags[0].classList.add('active'); tags[0].setAttribute('aria-pressed','true');

        // Modal
        const modalBackdrop = document.getElementById('modalBackdrop');
        const modalTitle = document.getElementById('modalTitle');
        const modalDesc = document.getElementById('modalDesc');
        const modalLinks = document.getElementById('modalLinks');
        const modalClose = document.getElementById('modalClose');

        function openModal(data){
            modalTitle.textContent = data.title;
            modalDesc.textContent = data.desc;
            modalLinks.innerHTML = '';
            (data.links||[]).forEach(l=>{
                const a = document.createElement('a');
                a.className = 'badge';
                a.href = l.url; a.target = '_blank'; a.rel='noopener';
                a.textContent = l.label;
                modalLinks.appendChild(a);
            });
            // show modal and prevent background scroll
            modalBackdrop.style.display = 'flex';
            modalBackdrop.setAttribute('aria-hidden','false');
            document.body.style.overflow = 'hidden';
            // focus close button inside modal for accessibility
            setTimeout(()=> modalClose.focus(), 50);
        }

        function closeModal(){
            modalBackdrop.style.display = 'none';
            modalBackdrop.setAttribute('aria-hidden','true');
            document.body.style.overflow = '';
        }

        document.querySelectorAll('.more').forEach(btn=> btn.addEventListener('click', (e)=>{
            const data = JSON.parse(btn.dataset.project);
            openModal(data);
        }));
        modalClose.addEventListener('click', closeModal);
        modalBackdrop.addEventListener('click', (e)=>{ if(e.target===modalBackdrop) closeModal(); });
        document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeModal(); });

        // Theme handling: unify site-wide selection (stored under 'siteTheme')
        const themeToggle = document.getElementById('themeToggle');
        const lightNote = document.getElementById('lightNote');
        const dismissLightNote = document.getElementById('dismissLightNote');
        const themeFooterButtons = Array.from(document.querySelectorAll('.site-theme-footer .theme-btn'));

        function applySiteTheme(theme){
            if(theme === 'light'){
                document.documentElement.setAttribute('data-theme','light');
                themeToggle.setAttribute('aria-pressed','true');
                if(!localStorage.getItem('light_note_dismissed')) lightNote.style.display = 'block';
            } else if(theme === 'dark'){
                document.documentElement.setAttribute('data-theme','dark');
                themeToggle.setAttribute('aria-pressed','false');
                lightNote.style.display = 'none';
            } else {
                // auto: explicitly mark as 'auto' so :root[data-theme='auto'] CSS can target it
                document.documentElement.setAttribute('data-theme','auto');
                const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
                if(prefersLight){ if(!localStorage.getItem('light_note_dismissed')) lightNote.style.display = 'block'; }
                else lightNote.style.display = 'none';
            }
            localStorage.setItem('siteTheme', theme);
            themeFooterButtons.forEach(b=> b.classList.toggle('active', b.dataset.theme===theme));
            themeFooterButtons.forEach(b=> b.setAttribute('aria-pressed', String(b.dataset.theme===theme)));
        }

        // init site theme
        (function(){
            const stored = localStorage.getItem('siteTheme');
            if(stored) applySiteTheme(stored);
            else{
                const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
                applySiteTheme(prefersLight ? 'light' : 'dark');
            }
        })();

        // footer buttons
        themeFooterButtons.forEach(b=> b.addEventListener('click', ()=> applySiteTheme(b.dataset.theme)));

        // theme toggle button (keeps previous behavior but maps to siteTheme)
        themeToggle.addEventListener('click', ()=>{
            const now = document.documentElement.getAttribute('data-theme') === 'light' ? 'light' : (document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'auto');
            const next = now === 'light' ? 'dark' : 'light';
            applySiteTheme(next);
        });

        dismissLightNote.addEventListener('click', ()=>{ localStorage.setItem('light_note_dismissed','1'); lightNote.style.display='none'; });

        // keyboard: enter opens card's more
        cards.forEach(card=>{
            card.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ const btn = card.querySelector('.more'); btn && btn.click(); } });
        });
    </script>
    
</body>
</html>